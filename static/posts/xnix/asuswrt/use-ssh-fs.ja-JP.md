# SSH FSの使用

![VS CodeでSSH FSに接続した画面](/resources/2023-10-22-11-55-54.png)

*VS Code*の*SSH FS*を使用して、便利にファイルを管理する方法を学びます。

*ルーター*に頻繁に接続して作業をしていると、管理するファイルがどんどん増えていきます。 \
そのため、もう少し便利に作業をするために、*VS Code*を使ってファイルを管理できる機能を追加しました。

最初は*Vim*をインストールしてプラグインを使って作業しようかと考えましたが、*Vim*のインストール時に発生するエラーを確認する時間もなく、プラグインの管理もうまくできるか心配でした。

そこで、ルーターに*VS Code*のサーバーバージョンをインストールして作業しようとしましたが、やはりサポートされていない環境だったため、諦めました。

悩んだ末に出た考えは、ネットワークファイルをマウントしてローカルで*VS Code*で作業できないかというもので、探してみたソリューションが*SSH FS*でした。 \
*REMOTE FS*という拡張機能もありますが、説明があまりにも不十分で、最後の更新も2019年5月5日だったため除外しました。

## *SSH FS*とは

*SSH FS*は*VS Code*の拡張機能であり、*SSH FS*は内部的に*SSHFS*を使用します。

*SSHFS*は*Secure Shell File System*の略で、*SSH*を通じて*ファイルシステム*をマウントするツールです。 \
*VS Code*をサーバーバージョンとしてインストールできない環境で便利です。

## 環境

- **ハードウェア**: \
  *AC88U*
- **ファームウェア**: \
  *asuswrt-merlin 386.12*
- **パッケージ**: \
  *Entware armv7sf-k2.6*

## 要件

- ***SSH*アクセスの許可**
- ***Entware*のインストール**

## 方法

1. ***openssl-sftp*のインストール**:

   1. *SSH*でルーターに接続
   2. コマンドを実行

      ```bash
      opkg install openssl-sftp
      ```

      *entware*を利用して*openssl-sftp*をインストールします。

2. ***SSH FS*のインストール**:
   1. *マーケットプレイス*の[*SSH FS*]紹介ページで*Install*ボタンをクリック

## 使用方法

![SSH FS設定画面](/resources/2023-10-22-13-40-10.png)

*SSH*接続と同じ接続情報を要求します。

0. *プライマリサイドバー*で*SSH FS*ボタンをクリック
1. *サイドバー*の拡張領域で設定作成ボタンをクリック
2. 設定情報入力画面で*SSH*接続情報を入力
3. 下部にある*SAVE*ボタンをクリック
4. *サイドバー*の拡張領域で作成された接続情報を確認してクリック \
   左側は*ディレクトリ*マウント機能、右側は*ターミナル*接続です。

> *VS Code*の設定を*GitHub*と同期させると、さらに便利に使用できます。

[*SSH FS*]: https://marketplace.visualstudio.com/items?itemName=Kelvin.VSCODE-sshfs
