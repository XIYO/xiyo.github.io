---
title: バックグラウンドジョブの確認
description: "`UNIX`および`UNIX LIKE`における`Job control`の一部である`jobs`コマンドについて説明します。"
authors:
  - XIYO
modifiedAt: 2025-07-27T21:08:42+09:00
createdAt: 2025-07-22T01:57:19+09:00
---
# バックグラウンドジョブの確認

`UNIX`および`UNIX LIKE`における`Job control`の一部である`jobs`コマンドについて説明します。

`jobs`は現在の`shell`の`background`で実行中の`job`を確認するためのコマンドです。

`Windows`と比較すると、\
`jobs`は`taskbar`（タスクバー）に似ており、\
現在のセッションで実行中であるが`foreground`では見ることができない、\
最小化されて`background`で実行中のプログラムを確認する行為に相当します。

> 🔵 注
>
> UNIXにおける`Job`は`Process`の集合を意味します。\
> JobのPIDは`Process Group ID`を意味します。

> 🔵 注
>
> MacOS、Sonomaで`zsh`を使用してテストしました。\
> zshは拡張機能があり、`man zshbuiltins`で詳細情報を確認できます。

> 🔵 注
>
> この文書は`UNIX`の公式グループである[`THE Open GROUP`](https://www.opengroup.org)が提供する`The Open Group Base Specifications Issue 7`の[`jobs`](https://pubs.opengroup.org/onlinepubs/9699919799.2016edition/utilities/jobs.html)の説明を翻訳したもので、ユーザーが知っておくべき部分を簡潔に説明しています。

## 概要

- `[ ]`（角括弧）は省略可能です。
- `|`（パイプ）は複数のオプションの中から1つを選択できます。
- `...`（三点リーダー）は複数の引数を指定できます。

```text
jobs [-l| -p][job_id...]
```

## オプション

- `-l`\
  （小文字の**L**）リストされた各ジョブに関する詳細情報を提供します。この情報にはジョブ番号、現在のジョブ、プロセスグループID、状態、およびジョブを形成したコマンドが含まれます。

- `-p`\
  選択したジョブのプロセスグループリーダーに対するプロセスIDのみを表示します。

## オペランド

- `job_id`\
  状態を表示するジョブを指定します。`job_id`が指定されていない場合、すべてのジョブに対する状態情報が表示されます。`job_id`の形式はXBD [`Job Control Job ID`](https://pubs.opengroup.org/onlinepubs/9699919799.2016edition/basedefs/V1_chap03.html#tag_03_204)に説明されています。

## STDOUT

**`-p`オプション**が指定された場合、\
出力は各プロセスIDに対して1行で構成されます。

```text
"%d\n", <process ID>
```

**`-l`オプション**が指定されていない場合、\
出力は次の形式の一連の行で構成されます。

```text
"[%d] %c %s %s\n", <job-number>, <current>, <state>, <command>
```

ここでフィールドは次のようになります：

- `<job-number>`

  - `wait`、`fg`、`bg`、および`kill`ユーティリティにプロセスグループを識別するために使用できる番号です。
  - これらのユーティリティを使用して、ジョブ番号の前に`%`を付けてジョブを識別できます。

- `<current>`

  - 文字`+`は`fg`または`bg`ユーティリティに対するデフォルトとして使用されるジョブを識別します。\
    このジョブは`job_id %+`または`"%%"`を使用して指定することもできます。
  - 文字`-`は現在のデフォルトジョブが終了した場合のデフォルトとなるジョブを識別します。\
    このジョブは`job_id %-`を使用して指定することもできます。
  - 他のジョブの場合、このフィールドは`space`（空白）です。
  - 最大1つのジョブのみが`+`で、最大1つのジョブのみが`-`で識別できます。
  - どのジョブが中断された場合、現在のジョブは中断されたジョブである必要があります。
  - 最低2つのジョブが中断された場合、前のジョブも中断されたジョブである必要があります。

- `<state>`\
  次の文字列のいずれかです（`POSIX locale`で）：

  - `Running`\
    ジョブが信号によって中断されておらず、終了していないことを示します。
  - `Done`\
    ジョブが完了し、終了状態が`0`を返したことを示します。
  - `Done(code)`\
    ジョブが正常に完了し、指定された`0`以外の終了状態、`code`で終了したことを示します。
  - `Stopped`\
    ジョブが`SIGTSTP`信号によって中断されたことを示します。
  - `Stopped (SIGTSTP)`\
    ジョブが`SIGTSTP`信号によって中断されたことを示します。
  - `Stopped (SIGSTOP)`\
    ジョブが`SIGSTOP`信号によって中断されたことを示します。
  - `Stopped (SIGTTIN)`\
    ジョブが`SIGTTIN`信号によって中断されたことを示します。
  - `Stopped (SIGTTOU)`\
    ジョブが`SIGTTOU`信号によって中断されたことを示します。

- `<command>`
  - シェルに提供された関連コマンドです。

**`-l`オプション**が指定された場合、\
プロセスグループIDを含むフィールドが`<state>`フィールドの前に挿入されます。\
また、プロセスグループ内の他のプロセスが別の行に出力されることがあり、プロセスIDと`<command>`フィールドのみを使用します。

## 例

まず、単純な`job`を生成するコマンドを`shell`で入力します。

```shell
sleep 100 &
```

10分間待機して消滅するコマンドである`sleep`を、\
`&`（アンパサンド）を利用して`background`で実行するコマンドです。

> 🔵 注
>
> `&`（アンパサンド）は現在のセッションでバックグラウンドでプロセスを実行するコマンドです。

**オプションなし**で`jobs`コマンドを実行した結果は次のとおりです。

コマンド入力

```shell
jobs
```

出力

```text
[1] + 12345 Running sleep $((60 * 10)) &
```

`zsh`を利用して`jobs`コマンドを実行した結果は次のとおりです。\
`zsh`は`job`が終了すると`Done`が出力されます。

[![asciicast](https://asciinema.xiyo.dev/a/22.svg)](https://asciinema.xiyo.dev/a/22)

> 🟣 重要
>
> `zsh 5.9 (x86_64-apple-darwin23.0)`は`jobs -p`を使用するとプロセス番号のみを出力する必要がありますが、バグがあり`-l`オプションと同じ機能を持っています。\
> `bash`は`jobs -p`がプロセス番号のみを正常に出力します。

