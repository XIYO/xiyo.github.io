.markdown {
	@apply mx-auto max-w-[70ch] p-4;
	font-family: var(--font-sans);
	color: var(--base-font-color);
	line-height: 1.7;
}

.markdown > *:first-child {
	margin-top: 0;
}

.markdown h1,
.markdown h2,
.markdown h3,
.markdown h4,
.markdown h5,
.markdown h6 {
	@apply font-black tracking-tight;
	line-height: 1.25;
color: var(--color-primary-600);
}

.markdown {
	@apply uppercase;
}

.markdown h1 {
	@apply mt-12 text-4xl md:text-5xl;
}

.markdown h2 {
	@apply mt-16 text-3xl md:text-4xl;
}

.markdown h2:first-child,
.markdown :where(* > h2:first-child) {
	margin-top: 0;
}

.markdown h3 {
	@apply mt-12 text-2xl md:text-3xl font-bold;
}

.markdown h4 {
	@apply mt-10 text-xl font-semibold;
}

.markdown h5 {
	@apply mt-8 text-lg font-semibold;
}

.markdown h6 {
	@apply mt-8 text-base font-semibold uppercase tracking-widest;
}

.markdown p,
.markdown ul,
.markdown ol,
.markdown blockquote,
.markdown pre,
.markdown figure,
.markdown table {
	@apply mt-6;
}

.markdown p {
	@apply text-base md:text-lg;
}

.markdown strong {
	@apply font-semibold;
}

.markdown em {
	font-style: italic;
}

.markdown a {
	@apply font-medium underline-offset-4 transition-colors;
	color: var(--color-secondary-500);
}

.markdown a:hover,
.markdown a:focus-visible {
	color: var(--color-secondary-400);
	text-decoration: underline;
}

.markdown .plain-link {
	@apply font-normal underline-offset-4;
	color: inherit;
	text-decoration: none;
}

.markdown .plain-link:hover,
.markdown .plain-link:focus-visible {
	text-decoration: underline;
}

.markdown blockquote {
	@apply border-l-4 pl-6 italic; 
	border-color: var(--color-primary-300);
	background: color-mix(in srgb, var(--color-primary-50) 40%, transparent);
}

.markdown ul {
	@apply list-disc pl-6;
}

.markdown .category-list {
	@apply list-none pl-0;
}

.markdown .posts-list {
	@apply list-disc pl-6;
}

.markdown ol {
	@apply list-decimal pl-6;
}

.markdown li + li {
	@apply mt-2;
}

.markdown hr {
	@apply my-12 border-t-2;
	border-color: color-mix(in srgb, var(--color-surface-400) 55%, transparent);
}

.markdown table {
	@apply w-full text-left text-sm md:text-base border-separate border-spacing-y-2;
}

.markdown thead th {
	@apply px-4 py-3 font-semibold;
	background: var(--color-surface-200);
}

.markdown tbody td {
	@apply px-4 py-3;
	background: color-mix(in srgb, var(--color-surface-200) 40%, transparent);
}

.markdown tbody tr:hover td {
	background: color-mix(in srgb, var(--color-primary-50) 35%, transparent);
}

.markdown figure {
	@apply text-center;
}

.markdown figure > img,
.markdown figure > a > img {
	@apply mx-auto rounded-xl shadow-lg;
	max-width: 100%;
	height: auto;
}

.markdown figcaption {
	@apply mt-3 text-sm;
	color: var(--color-surface-500);
}

.markdown img,
.markdown video {
	max-width: 100%;
	display: block;
	margin-inline: auto;
}

.markdown pre {
	@apply overflow-x-auto rounded-xl px-5 py-4;
	background: color-mix(in srgb, var(--color-surface-900) 85%, transparent);
	color: var(--color-primary-100);
}

.markdown pre code {
	@apply font-mono text-[0.95rem];
}

.markdown :not(pre) > code {
	@apply rounded-md px-1.5 py-0.5 text-sm;
	background: color-mix(in srgb, var(--color-surface-200) 60%, transparent);
	color: var(--color-primary-600);
}

.markdown details {
	@apply mt-6 rounded-xl border px-4 py-3;
	border-color: color-mix(in srgb, var(--color-primary-200) 50%, transparent);
}

.markdown summary {
	@apply cursor-pointer font-semibold;
}

.markdown h2,
.markdown h3,
.markdown h4,
.markdown h5,
.markdown h6 {
	scroll-margin-top: 7rem;
}

.markdown .anchor {
	@apply absolute -left-6 top-1/2 -translate-y-1/2 text-lg opacity-0 transition-opacity;
	color: var(--color-secondary-400);
}

.markdown h2:hover .anchor,
.markdown h3:hover .anchor,
.markdown h4:hover .anchor,
.markdown h5:hover .anchor,
.markdown h6:hover .anchor {
	opacity: 1;
}

.markdown .callout {
	@apply my-8 rounded-xl border px-4 py-3 shadow-sm;
	border-color: color-mix(in srgb, var(--color-primary-200) 60%, transparent);
	background: color-mix(in srgb, var(--color-primary-50) 45%, transparent);
}

.markdown .callout-title {
	@apply mb-2 flex items-center gap-2 font-semibold;
}

.markdown .callout-content p {
	@apply mt-3;
}

.markdown .callout.info {
	border-color: color-mix(in srgb, var(--color-secondary-200) 60%, transparent);
	background: color-mix(in srgb, var(--color-secondary-50) 45%, transparent);
}

.markdown .callout.warn {
	border-color: color-mix(in srgb, var(--color-warning-200) 60%, transparent);
	background: color-mix(in srgb, var(--color-warning-50) 45%, transparent);
}

.markdown .callout.error {
	border-color: color-mix(in srgb, var(--color-error-200) 60%, transparent);
	background: color-mix(in srgb, var(--color-error-50) 45%, transparent);
}

.markdown .mermaid {
	@apply my-10 overflow-x-auto rounded-xl border p-4;
	border-color: color-mix(in srgb, var(--color-surface-300) 60%, transparent);
	background: color-mix(in srgb, var(--color-surface-200) 40%, transparent);
}

.markdown iframe {
	@apply my-8 aspect-video w-full overflow-hidden rounded-xl shadow-lg;
	background: color-mix(in srgb, var(--color-surface-200) 40%, transparent);
}

@media (prefers-color-scheme: dark) {
	.markdown {
		color: var(--base-font-color-dark);
	}

	.markdown a {
		color: var(--color-secondary-400);
	}

	.markdown a:hover,
	.markdown a:focus-visible {
		color: var(--color-secondary-300);
	}

	.markdown blockquote {
		background: color-mix(in srgb, var(--color-primary-900) 30%, transparent);
	}

	.markdown tbody td {
		background: color-mix(in srgb, var(--color-surface-900) 40%, transparent);
	}

	.markdown tbody tr:hover td {
		background: color-mix(in srgb, var(--color-primary-900) 35%, transparent);
	}

	.markdown pre {
		background: color-mix(in srgb, var(--color-surface-900) 92%, transparent);
		color: var(--color-primary-200);
	}

	.markdown :not(pre) > code {
		background: color-mix(in srgb, var(--color-surface-900) 75%, transparent);
		color: var(--color-primary-300);
	}
}
