@layer base {
	.markdown {
		@apply mx-auto max-w-4xl px-6 my-12 md:px-10 md:my-16 font-sans text-sm md:text-base leading-7 text-pretty space-y-8;
		color: color-mix(in srgb, var(--base-font-color) 85%, transparent);
	}

	.markdown h1 {
		@apply mt-16 text-balance text-4xl md:text-5xl font-black tracking-tight text-surface-700-300;
		border-bottom: 1px solid color-mix(in srgb, currentColor 12%, transparent);
		@apply pb-6 mb-8;
	}

	.markdown h2 {
		@apply mt-12 text-balance text-2xl md:text-3xl font-bold tracking-tight text-surface-700-300;
	}

	.markdown h3 {
		@apply mt-10 text-xl font-semibold text-surface-700-300;
	}

	.markdown h4,
	.markdown h5,
	.markdown h6 {
		@apply text-lg font-semibold uppercase tracking-wide text-surface-700-300;
	}

	.markdown h4 {
		@apply mt-8;
	}

	.markdown h5 {
		@apply mt-6;
	}

	.markdown h6 {
		@apply mt-4;
	}

	.markdown p {
		@apply text-pretty text-base leading-7;
		color: color-mix(in srgb, var(--base-font-color) 75%, transparent);
	}

	.markdown strong {
		@apply font-semibold;
		color: color-mix(in srgb, var(--base-font-color) 65%, var(--color-surface-contrast-light) 35%);
	}

	.markdown em {
		@apply italic;
	}

	.markdown a {
		@apply font-medium underline-offset-4 transition-colors;
		color: color-mix(in srgb, var(--color-primary-400) 100%, transparent);
	}

	.markdown a:hover,
	.markdown a:focus-visible {
		@apply underline;
		color: color-mix(in srgb, var(--color-primary-300) 100%, transparent);
	}

	.markdown .plain-link {
		@apply font-normal underline-offset-4;
		color: inherit;
		text-decoration: none;
	}

	.markdown .plain-link:hover,
	.markdown .plain-link:focus-visible {
		@apply underline;
	}

	.markdown ul {
		@apply list-disc pl-6 space-y-3;
		color: color-mix(in srgb, var(--base-font-color) 75%, transparent);
	}

	.markdown ol {
		@apply list-decimal pl-6 space-y-3;
		color: color-mix(in srgb, var(--base-font-color) 75%, transparent);
	}

	.markdown li + li {
		@apply mt-2;
	}

	.markdown blockquote {
		@apply rounded-xl border px-6 py-4 leading-7;
		border-color: color-mix(in srgb, var(--color-primary-300) 45%, transparent);
		background: color-mix(in srgb, var(--color-primary-900) 25%, transparent);
		color: color-mix(in srgb, var(--color-primary-50) 90%, transparent);
	}

	.markdown hr {
		@apply my-12 border-0;
		height: 1px;
		background: color-mix(in srgb, var(--color-surface-400) 30%, transparent);
	}

	.markdown table {
		@apply w-full text-left text-sm md:text-base overflow-hidden rounded-2xl;
		border-collapse: collapse;
		background: color-mix(in srgb, var(--color-surface-950) 88%, transparent);
		border: 1px solid color-mix(in srgb, var(--color-surface-contrast-light) 12%, transparent);
	}

	.markdown thead th {
		@apply px-4 py-3 font-semibold uppercase tracking-wide text-xs;
		background: color-mix(in srgb, var(--color-surface-900) 85%, transparent);
		color: color-mix(in srgb, var(--color-surface-contrast-light) 92%, transparent);
		border-bottom: 1px solid color-mix(in srgb, var(--color-surface-contrast-light) 18%, transparent);
	}

	.markdown tbody td {
		@apply px-4 py-3 align-top;
		background: transparent;
		color: color-mix(in srgb, var(--color-surface-contrast-light) 88%, transparent);
		border-bottom: 1px solid color-mix(in srgb, var(--color-surface-contrast-light) 12%, transparent);
	}

	.markdown tbody tr:last-child td {
		border-bottom: none;
	}

	.markdown figure {
		@apply text-center space-y-4;
	}

	.markdown figure > img,
	.markdown figure > a > img {
		@apply mx-auto rounded-2xl shadow-lg;
		max-width: 100%;
		height: auto;
	}

	.markdown figcaption {
		@apply text-sm text-pretty;
		color: color-mix(in srgb, var(--color-surface-500) 70%, transparent);
	}

	.markdown img,
	.markdown video {
		@apply mx-auto block max-w-full;
	}

	.markdown pre {
		@apply overflow-x-auto rounded-2xl px-6 py-4 text-left text-sm md:text-base;
		background: color-mix(in srgb, var(--color-black) 35%, black 65%);
		color: var(--color-primary-50);
		box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-primary-500) 25%, transparent);
	}

	.markdown pre code {
		@apply font-mono text-left text-[0.95rem] leading-relaxed;
		color: inherit;
	}

	.markdown :not(pre) > code {
		@apply rounded-lg px-2 py-1 text-sm;
		background: color-mix(in srgb, var(--color-primary-900) 40%, black 60%);
		color: var(--color-primary-50);
		box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-primary-500) 25%, transparent);
	}

	.markdown details {
		@apply mt-8 rounded-xl border px-4 py-3 transition-colors;
		border-color: color-mix(in srgb, var(--color-primary-300) 35%, transparent);
		background: color-mix(in srgb, var(--color-primary-900) 20%, transparent);
	}

	.markdown details[open] {
		background: color-mix(in srgb, var(--color-primary-800) 35%, transparent);
		border-color: color-mix(in srgb, var(--color-primary-400) 45%, transparent);
		color: color-mix(in srgb, var(--color-primary-50) 90%, transparent);
	}

	.markdown .callout {
		@apply mt-10 rounded-2xl border px-6 py-5 shadow-lg;
		border-color: color-mix(in srgb, var(--color-surface-400) 35%, transparent);
		background: color-mix(in srgb, var(--color-surface-950) 70%, transparent);
		color: color-mix(in srgb, var(--base-font-color-dark) 85%, transparent);
	}

	.markdown .callout-title {
		@apply flex items-center gap-3 text-sm font-semibold uppercase text-pretty;
		letter-spacing: 0.2em;
		color: color-mix(in srgb, var(--color-surface-200) 80%, transparent);
	}

	.markdown .callout-content {
		@apply mt-3 space-y-3 text-pretty;
	}

	.markdown .callout-content p {
		@apply mt-0;
	}

	.markdown .callout.info {
		border-color: color-mix(in srgb, var(--color-secondary-300) 45%, transparent);
		background: color-mix(in srgb, var(--color-secondary-900) 35%, transparent);
		color: color-mix(in srgb, var(--color-secondary-100) 88%, transparent);
	}

	.markdown .callout.warn {
		border-color: color-mix(in srgb, var(--color-warning-300) 45%, transparent);
		background: color-mix(in srgb, var(--color-warning-900) 35%, transparent);
		color: color-mix(in srgb, var(--color-warning-100) 88%, transparent);
	}

	.markdown .callout.error {
		border-color: color-mix(in srgb, var(--color-error-300) 45%, transparent);
		background: color-mix(in srgb, var(--color-error-900) 35%, transparent);
		color: color-mix(in srgb, var(--color-error-50) 92%, transparent);
	}

	.markdown .anchor {
		@apply inline-flex items-center gap-2 text-xs font-medium uppercase text-surface-400 hover:text-surface-200 transition-colors;
		letter-spacing: 0.3em;
	}

	.markdown iframe,
	.markdown .embed {
		@apply my-10 aspect-video w-full overflow-hidden rounded-2xl border shadow-lg;
		border-color: color-mix(in srgb, var(--color-surface-400) 35%, transparent);
		background: color-mix(in srgb, var(--color-surface-900) 60%, transparent);
	}

	.markdown .mermaid {
		@apply my-10 overflow-x-auto rounded-2xl border px-6 py-4;
		border-color: color-mix(in srgb, var(--color-surface-400) 35%, transparent);
		background: color-mix(in srgb, var(--color-surface-900) 45%, transparent);
	}

	.markdown .gist {
		@apply my-10 overflow-hidden rounded-2xl border shadow-lg;
		border-color: color-mix(in srgb, var(--color-surface-400) 35%, transparent);
	}

	@media (prefers-color-scheme: dark) {
		.markdown {
			color: color-mix(in srgb, var(--base-font-color-dark) 88%, transparent);
		}

		.markdown p,
		.markdown ul,
		.markdown ol {
			color: color-mix(in srgb, var(--base-font-color-dark) 80%, transparent);
		}

		.markdown strong {
			color: color-mix(in srgb, var(--base-font-color-dark) 45%, var(--color-surface-contrast-light) 55%);
		}
	}
}
